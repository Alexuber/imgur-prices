function e(e){return e&&e.__esModule?e.default:e}var t={};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s;return e};let s=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"");const r=new class{getJsonFromLocalStorage(e){const t=localStorage.getItem(e);try{return JSON.parse(t)}catch(e){console.log(e.name),console.log(e.message)}}saveToLocalStorage(){localStorage.setItem("tableUsers",JSON.stringify(this.users))}constructor(){e(t)(this,"users",void 0),e(t)(this,"addUser",(e=>{e.preventDefault();const{elements:{name:t,email:r,age:n}}=e.currentTarget;if(Number(n.value)<18||Number(n.value)>99)return alert("Age must be between 18 to 99");if(this.selectedId){const e=this.users.findIndex((({id:e})=>e===this.selectedId));-1!==e&&(this.users[e].name=t.value,this.users[e].email=r.value,this.users[e].age=n.value,this.selectedId=null,this.saveToLocalStorage())}else{const e={id:s(4),name:t.value,email:r.value,age:n.value};this.checkExistsUser(e)&&(this.users=[...this.users,e],this.saveToLocalStorage())}e.currentTarget.reset(),this.selectedId=null,this.render()})),e(t)(this,"render",(()=>{const e=document.getElementById("body"),t=this.users.map((({id:e,name:t,email:s,age:r})=>`<tr>\n    <td>${e}</td>\n    <td>${t}</td>\n    <td>${s}</td>\n    <td>${r}</td>\n    <td class="options">\n    <button type='button' class='edit' data-id='${e}'>Edit</button>\n    </td>\n    <td class="options">\n      <button class='delete' type='submit' data-id='${e}'>Delete</button>\n    </td>\n  </tr>`));e.innerHTML=t.join(""),e.addEventListener("click",(e=>{const t=e.target.closest(".delete"),s=e.target.closest(".edit");if(t){const e=t.dataset.id;this.deleteUser(e)}if(s){const e=s.dataset.id;this.editUser(e)}const r=document.querySelector(".sort-asc"),n=document.querySelector(".sort-desc");r.addEventListener("click",(()=>{const e=r.dataset.column;this.sortAscending(e)})),n.addEventListener("click",(()=>{const e=n.dataset.column;this.sortDescending(e)}))}))})),e(t)(this,"deleteUser",(e=>{const t=this.users.filter((({id:t})=>t!==e));this.users=t,this.saveToLocalStorage();const s=document.getElementById("body");if(0===this.users.length)return s.innerHTML="";this.render()})),e(t)(this,"editUser",(e=>{this.selectedId=e;const t=this.users.find((({id:t})=>t===e)),s=document.querySelector("form"),r=s.querySelector("#name"),n=s.querySelector("#email"),o=s.querySelector("#age");r.value=t.name,n.value=t.email,o.value=t.age})),e(t)(this,"sortAscending",(e=>{this.users.sort(((t,s)=>t[e]-s[e])),this.render()})),e(t)(this,"sortDescending",(e=>{this.users.sort(((t,s)=>s[e]-t[e])),this.render()})),e(t)(this,"checkExistsUser",(({name:e,email:t})=>!this.users.some((s=>e===s.name||t===s.email))||(alert("User or email already exists!"),!1))),this.users=[],this.selectedId=null}};r.users=r.getJsonFromLocalStorage("tableUsers")||[],r.render();document.querySelector("form").addEventListener("submit",r.addUser);const n=document.querySelectorAll(".sort-asc"),o=document.querySelectorAll(".sort-desc");n.forEach((e=>{e.addEventListener("click",(()=>{const t=e.dataset.column;r.sortAscending(t)}))})),o.forEach((e=>{e.addEventListener("click",(()=>{const t=e.dataset.column;r.sortDescending(t)}))}));
//# sourceMappingURL=table.10b80f4b.js.map
